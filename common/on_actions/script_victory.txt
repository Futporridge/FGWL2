on_actions = {

	# FROM = winner
	# ROOT = country being capitulated/loser
	
	on_capitulation = {
		effect = {
			if = { #Ломбардия-венеция побеждавет левых
				limit = {
					FROM = { original_tag = VEN }
					ROOT = { original_tag = ISR }
				}

				FROM = {
					white_peace = ROOT
					annex_country = {
					 	target = ROOT
					 	transfer_troops = no
					 }
				}
			}
			if = { #Левые побеждают ломбардию-венецию
				limit = {
					FROM = { tag = ISR }
					ROOT = { tag = VEN }
				}

				ISR = {
					transfer_state = 803
					transfer_state = 160
					transfer_state = 908
					add_state_core = 803
					add_state_core = 160
					add_state_core = 908
				}
				
				SLV = {
					transfer_state = 736
					add_state_core = 736
				}
				
				RCR = {
					transfer_state = 103
					add_state_core = 103
				}
				
				LTE = {
					transfer_state = 44
					transfer_state = 820
					transfer_state = 932
					transfer_state = 182
				}
			}
			if = { #республиканцы побеждают пъемонд 
				limit = {
					FROM = {
						OR = {
							original_tag = LYO
							original_tag = VCH
							original_tag = PRO
						}
					}
					ROOT = { original_tag = PIE }
				}
				
				if = {
					limit = {
						country_exists = LYO
					}
					LYO = {
						transfer_state = 918
						transfer_state = 845
						white_peace = ROOT
					}
					if = {
						limit = {
							NOT = {
								country_exists = PRO
							}
						}
						LYO = {
							transfer_state = 735
							transfer_state = 919
							transfer_state = 21
						}
					}
				}
				if = {
					limit = {
						country_exists = PRO
					}
					PRO = {
						transfer_state = 735
						transfer_state = 919
						white_peace = ROOT
					}
					if = {
						limit = {
							NOT = {
								country_exists = LYO
							}
						}
						PRO = {
							transfer_state = 918
							transfer_state = 845
							transfer_state = 800
							transfer_state = 20
						}
					}
				}
				if = {
					limit = {
						country_exists = VCH
					}
					VCH = {
						white_peace = ROOT
					}
					if = {
						limit = {
							NOT = {
								country_exists = LYO
								country_exists = PRO
							}
						}
						VCH = {
							transfer_state = 918
							transfer_state = 845
							transfer_state = 800
							transfer_state = 20
							transfer_state = 735
							transfer_state = 919
							transfer_state = 21
						}
					}
				}
			}
			if = { #пъемонд побеждает прованс
				limit = {
					FROM = { original_tag = PIE }
					ROOT = { original_tag = PRO }
				}
				FROM = {
					white_peace = ROOT
				}
				MOD = {
					annex_country = {
						target = ROOT
						transfer_troops = no
					}
					load_oob = MOD_PRO
					add_state_core = 21
				}
				PIE = {
					puppet = MOD
				}
			}
			if = { #пъемонд побеждает лион
				limit = {
					FROM = { original_tag = PIE }
					ROOT = { original_tag = LYO }
				}
				FROM = {
					white_peace = ROOT
				}
				MOD = {
					annex_country = {
						target = ROOT
						transfer_troops = no
					}
					load_oob = MOD_LYO
					add_state_core = 20
					add_state_core = 800
				}
				PIE = {
					puppet = MOD
				}
			}
			if = { #пъемонд побеждает виши
				limit = {
					FROM = { original_tag = PIE }
					ROOT = { original_tag = VCH }
				}
				FROM = {
					white_peace = ROOT
				}
				MOD = {
					annex_country = {
						target = ROOT
						transfer_troops = no
					}
					load_oob = MOD_VCH
					add_state_core = 799
					add_state_core = 21
				}
				PIE = {
					puppet = MOD
				}
			}
		}
	}
}